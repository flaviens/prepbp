Taken from https://github.com/black-parrot-hdk/black-parrot-subsystems, commit 9e64c62c11d220c844fb40609ee39cff1bacd704